<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Admin - MindSight Elite 360</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
        #login, #dashboard { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        form { display: flex; flex-direction: column; }
        label { margin: 10px 0 5px; }
        input, select, button { padding: 10px; margin-bottom: 10px; }
        #output { margin-top: 20px; padding: 10px; background: #e0f7fa; border: 1px solid #00acc1; }
        #deportistas { margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background: #f2f2f2; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="login">
        <h2>Login Admin</h2>
        <form id="loginForm">
            <label for="username">Usuario:</label>
            <input type="text" id="username" required>
            <label for="password">Contraseña:</label>
            <input type="password" id="password" required>
            <button type="submit">Ingresar</button>
        </form>
    </div>

    <div id="dashboard" class="hidden">
        <h2>Dashboard Admin - MindSight Elite 360</h2>
        
        <!-- Formulario para Datos de Deportista -->
        <h3>Agregar Deportista</h3>
        <form id="athleteForm">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" required>
            <label for="apellidos">Apellidos:</label>
            <input type="text" id="apellidos" required>
            <label for="telefono">Teléfono:</label>
            <input type="tel" id="telefono" required>
            <label for="mail">Email:</label>
            <input type="email" id="mail" required>
            <label for="deporte">Deporte:</label>
            <input type="text" id="deporte" required>
            <label for="fecha_nacimiento">Fecha de Nacimiento (YYYY-MM-DD):</label>
            <input type="date" id="fecha_nacimiento" required>
            <label for="hora_nacimiento">Hora de Nacimiento (HH:MM):</label>
            <input type="time" id="hora_nacimiento" required>
            <button type="submit">Guardar Deportista</button>
        </form>

        <!-- Lista de Deportistas Guardados -->
        <h3>Deportistas Registrados</h3>
        <table id="athletesTable">
            <thead>
                <tr>
                    <th>Nombre Completo</th>
                    <th>Teléfono</th>
                    <th>Email</th>
                    <th>Deporte</th>
                    <th>Fecha Nacimiento</th>
                    <th>Hora Nacimiento</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <!-- Formulario para Análisis de Objeto -->
        <h3>Análisis de Objeto</h3>
        <form id="analysisForm">
            <label for="objeto">Objeto:</label>
            <select id="objeto" required>
                <option value="espejo">Espejo</option>
                <option value="puerta">Puerta</option>
                <option value="reloj">Reloj</option>
                <option value="libro">Libro</option>
                <option value="rio">Río</option>
                <option value="vela">Vela</option>
                <option value="puente">Puente</option>
                <option value="llave">Llave</option>
                <option value="coche">Coche</option>
                <option value="casa">Casa</option>
            </select>
            <label for="estado">Estado:</label>
            <input type="text" id="estado" required placeholder="e.g., roto">
            <label for="color">Color:</label>
            <select id="color" required>
                <option value="dorado">Dorado</option>
                <option value="negro">Negro</option>
                <option value="blanco">Blanco</option>
                <option value="rojo">Rojo</option>
                <option value="azul">Azul</option>
                <option value="rosa">Rosa</option>
                <option value="violeta">Violeta</option>
            </select>
            <label for="textura">Textura:</label>
            <select id="textura" required>
                <option value="lisa">Lisa</option>
                <option value="aspera">Áspera</option>
                <option value="pegajosa">Pegajosa</option>
                <option value="fria">Fría</option>
                <option value="caliente">Caliente</option>
            </select>
            <label for="tamaño">Tamaño:</label>
            <select id="tamaño" required>
                <option value="pequeño">Pequeño</option>
                <option value="mediano">Mediano</option>
                <option value="grande">Grande</option>
            </select>
            <button type="submit">Analizar</button>
        </form>
        <div id="analysisOutput"></div>

        <button onclick="logout()">Cerrar Sesión</button>
    </div>

    <script>
        // Datos para análisis (convertido del Python script)
        const objects = {
            "espejo": "Ego/Auto-percepción",
            "puerta": "Transiciones/Cambio",
            "reloj": "Relación con el Tiempo",
            "libro": "Infancia/Aprendizaje",
            "rio": "Emociones/Flujo",
            "vela": "Esperanza/Espiritualidad",
            "puente": "Relaciones/Conexiones",
            "llave": "Acceso/Secretos",
            "coche": "Autonomía/Independencia",
            "casa": "Familia/Hogar Interno"
        };

        const states = {
            "espejo": {
                "nuevo": ["Confianza en la autoimagen", "¿Qué te hace sentir seguro? Usa esa confianza."],
                "roto": ["Autoimagen dañada, trauma", "¿Qué dañó cómo te ves? Imagina reparar el espejo."],
                "sucio": ["Confusión sobre la identidad", "¿Qué te impide verte claro? Visualiza limpiar."],
                "antiguo": ["Apego al pasado", "¿Qué recuerdo define tu autoimagen? Reescribe."]
            },
            "puerta": {
                "abierta": ["Disposición al cambio", "¿Qué te motiva a avanzar? Usa esa energía."],
                "cerrada": ["Miedo al cambio, resistencia", "¿Qué te frena? Visualiza abrir la puerta."],
                "rota": ["Obstáculos en transiciones", "¿Qué bloqueó un cambio? Repara la puerta."],
                "solida": ["Seguridad en decisiones", "¿Qué te da estabilidad? Usa esa fuerza."]
            },
            // Agrega los demás estados como en el Python script...
            // Nota: Por brevedad, copia el resto de 'states' del código Python anterior y adáptalo aquí.
        };

        const colors = {
            "dorado": ["Autoestima alta, éxito, valor", "¿Qué te hace sentir valioso? Visualiza brillar."],
            "negro": ["Aislamiento, misterio, introspección profunda", "¿Qué te hace sentir oscuro o aislado? Imagina añadir luz."],
            // Agrega los demás colores...
        };

        const textures = {
            "lisa": ["Armonía, fluidez emocional, confianza restaurada", "¿Qué te hace sentir en paz? Suaviza la superficie."],
            "aspera": ["Conflictos internos, resistencia, heridas no sanadas", "¿Qué conflicto te irrita? Pule la aspereza."],
            "pegajosa": ["Apegos emocionales, emociones estancadas, codependencia", "¿Qué te mantiene atado? Limpia la pegajosidad."],
            "fria": ["Desconexión emocional, miedo, aislamiento", "¿Qué te hace sentir distante? Añade calor."],
            "caliente": ["Conexión emocional, pasión restaurada, vitalidad", "¿Qué te da energía vital? Infunde calor."]
        };

        const sizes = {
            "pequeño": ["Minimización, inseguridad, sentimiento de insignificancia", "¿Qué te hace sentir insuficiente? Visualiza agrandar."],
            "mediano": ["Equilibrio, estabilidad emocional, neutralidad", "¿Qué te mantiene en balance? Ajusta para dinamismo."],
            "grande": ["Abrumador, presión, importancia exagerada", "¿Qué te abruma? Visualiza reducir."]
        };

        // Login simple (cambia estos valores para producción)
        const adminUser = "admin";
        const adminPass = "mindsight123";

        // Login Form
        document.getElementById("loginForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const user = document.getElementById("username").value;
            const pass = document.getElementById("password").value;
            if (user === adminUser && pass === adminPass) {
                document.getElementById("login").classList.add("hidden");
                document.getElementById("dashboard").classList.remove("hidden");
                loadAthletes();
            } else {
                alert("Usuario o contraseña incorrectos.");
            }
        });

        // Logout
        function logout() {
            document.getElementById("dashboard").classList.add("hidden");
            document.getElementById("login").classList.remove("hidden");
        }

        // Athlete Form - Save to localStorage
        document.getElementById("athleteForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const athlete = {
                nombre: document.getElementById("nombre").value,
                apellidos: document.getElementById("apellidos").value,
                telefono: document.getElementById("telefono").value,
                mail: document.getElementById("mail").value,
                deporte: document.getElementById("deporte").value,
                fecha_nacimiento: document.getElementById("fecha_nacimiento").value,
                hora_nacimiento: document.getElementById("hora_nacimiento").value
            };
            let athletes = JSON.parse(localStorage.getItem("athletes")) || [];
            athletes.push(athlete);
            localStorage.setItem("athletes", JSON.stringify(athletes));
            loadAthletes();
            document.getElementById("athleteForm").reset();
        });

        // Load Athletes Table
        function loadAthletes() {
            const tableBody = document.getElementById("athletesTable").querySelector("tbody");
            tableBody.innerHTML = "";
            let athletes = JSON.parse(localStorage.getItem("athletes")) || [];
            athletes.forEach(athlete => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${athlete.nombre} ${athlete.apellidos}</td>
                    <td>${athlete.telefono}</td>
                    <td>${athlete.mail}</td>
                    <td>${athlete.deporte}</td>
                    <td>${athlete.fecha_nacimiento}</td>
                    <td>${athlete.hora_nacimiento}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Analysis Form
        document.getElementById("analysisForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const obj = document.getElementById("objeto").value;
            const st = document.getElementById("estado").value;
            const col = document.getElementById("color").value;
            const tex = document.getElementById("textura").value;
            const siz = document.getElementById("tamaño").value;

            const psique = objects[obj] || "No encontrado";
            const stateData = states[obj] ? states[obj][st] : null;
            const stateInterp = stateData ? stateData[0] : "No encontrado";
            const stateGuide = stateData ? stateData[1] : "";
            const colorData = colors[col] || ["No encontrado", ""];
            const colorInterp = colorData[0];
            const colorGuide = colorData[1];
            const textureData = textures[tex] || ["No encontrado", ""];
            const textureInterp = textureData[0];
            const textureGuide = textureData[1];
            const sizeData = sizes[siz] || ["No encontrado", ""];
            const sizeInterp = sizeData[0];
            const sizeGuide = sizeData[1];

            const symbolism = `El ${obj} (${psique}) en estado ${st} (${stateInterp}) con color ${col} (${colorInterp}), textura ${tex} (${textureInterp}) y tamaño ${siz} (${sizeInterp}) simboliza una combinación de ${stateInterp.toLowerCase()} influenciada por ${colorInterp.toLowerCase()}, ${textureInterp.toLowerCase()} y ${sizeInterp.toLowerCase()}. Esto representa un trauma emocional relacionado con ${psique.toLowerCase()}.`;

            const trauma = `Posible trauma: ${stateInterp} agravado por ${colorInterp.toLowerCase()} (e.g., ${colorGuide.split('?')[0]}?), con sensación de ${textureInterp.toLowerCase()} (e.g., ${textureGuide.split('?')[0]}?) y percepción de ${sizeInterp.toLowerCase()} (e.g., ${sizeGuide.split('?')[0]}?). En la vida general, esto puede causar ${sizeInterp.toLowerCase()} en ${psique.toLowerCase()}, como inseguridad o abrumo. En deporte, afecta rendimiento por ${stateInterp.toLowerCase()} emocional, e.g., dudas en decisiones.`;

            const questions = `Preguntas para explorar: ${stateGuide} ${colorGuide} ${textureGuide} ${sizeGuide}`;

            const healing = `Cómo sanarlo: Libera con respiración cuadrada y gratitud al cuerpo. Re-visualiza el ${obj} en estado positivo (e.g., nuevo/intacto), color dorado (éxito), textura lisa/caliente (armonía/conexión), tamaño mediano (equilibrio), limpio, reluciente, con marco/orilla dorada reflejando victoria. Integra afirmaciones: 'Soy ${psique.toLowerCase()} equilibrado y poderoso'.`;

            document.getElementById("analysisOutput").innerHTML = `
                <h4>Análisis de la Combinación:</h4>
                <p><strong>Representación/Simbolismo:</strong> ${symbolism}</p>
                <p><strong>Significado y Trauma:</strong> ${trauma}</p>
                <p><strong>Preguntas para Explorar:</strong> ${questions}</p>
                <p><strong>Cómo Sanarlo:</strong> ${healing}</p>
            `;
        });
    </script>

</body>
</html>