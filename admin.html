23;40
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Admin - MindSight Elite 360</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
        #login, #dashboard { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        form { display: flex; flex-direction: column; }
        label { margin: 10px 0 5px; }
        input, select, button { padding: 10px; margin-bottom: 10px; }
        #output { margin-top: 20px; padding: 10px; background: #e0f7fa; border: 1px solid #00acc1; }
        #deportistas, #analyses { margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background: #f2f2f2; }
        .hidden { display: none; }
        button { background: #007cba; color: white; border: none; cursor: pointer; }
        button:hover { background: #005a87; }
        button.edit-btn, button.delete-btn, button.save-btn { padding: 5px; font-size: 12px; margin-right: 5px; }
        .edit-btn { background: #4CAF50; }
        .delete-btn { background: #f44336; }
        .save-btn { background: #2196F3; }
        input.edit-field, textarea { display: none; width: 100%; }
    </style>
</head>
<body>
    <div id="login">
        <h2>Login Admin</h2>
        <form id="loginForm">
            <label for="username">Usuario:</label>
            <input type="text" id="username" required>
            <label for="password">Contrase√±a:</label>
            <input type="password" id="password" required>
            <button type="submit">Ingresar</button>
        </form>
    </div>
    <div id="dashboard" class="hidden">
        <h2>Dashboard Admin - MindSight Elite 360</h2>
       
        <!-- Formulario para Datos de Deportista -->
        <h3>Agregar Deportista</h3>
        <form id="athleteForm">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" required>
            <label for="apellidos">Apellidos:</label>
            <input type="text" id="apellidos" required>
            <label for="telefono">Tel√©fono:</label>
            <input type="tel" id="telefono" required>
            <label for="mail">Email:</label>
            <input type="email" id="mail" required>
            <label for="deporte">Deporte:</label>
            <input type="text" id="deporte" required>
            <label for="fecha_nacimiento">Fecha de Nacimiento (YYYY-MM-DD):</label>
            <input type="date" id="fecha_nacimiento" required>
            <label for="hora_nacimiento">Hora de Nacimiento (HH:MM):</label>
            <input type="time" id="hora_nacimiento" required>
            <button type="submit">Guardar Deportista</button>
        </form>
        <!-- Lista de Deportistas Guardados -->
        <h3>Deportistas Registrados</h3>
        <table id="athletesTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Apellidos</th>
                    <th>Tel√©fono</th>
                    <th>Email</th>
                    <th>Deporte</th>
                    <th>Fecha Nacimiento</th>
                    <th>Hora Nacimiento</th>
                    <th>An√°lisis</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <!-- Formulario para An√°lisis de Objeto -->
        <h3>An√°lisis de Objeto (Vinculado a Deportista)</h3>
        <form id="analysisForm">
            <label for="athleteIdForAnalysis">Seleccionar Deportista:</label>
            <select id="athleteIdForAnalysis" required>
                <option value="">-- Elegir --</option>
            </select>
            <label for="objeto">Objeto:</label>
            <select id="objeto" required>
                <option value="">-- Seleccionar --</option>
                <option value="espejo">Espejo</option>
                <option value="puerta">Puerta</option>
                <option value="reloj">Reloj</option>
                <option value="libro">Libro</option>
                <option value="rio">R√≠o</option>
                <option value="vela">Vela</option>
                <option value="puente">Puente</option>
                <option value="llave">Llave</option>
                <option value="coche">Coche</option>
                <option value="casa">Casa</option>
            </select>
            <label for="estado">Estado:</label>
            <select id="estado" required>
                <option value="">-- Seleccionar --</option>
                <option value="roto">Roto</option>
                <option value="sucio">Sucio</option>
                <option value="limpio">Limpio</option>
                <option value="brillante">Brillante</option>
                <option value="oscuro">Oscuro</option>
                <option value="abierto">Abierto</option>
                <option value="cerrado">Cerrado</option>
                <option value="flotante">Flotante</option>
                <option value="hundido">Hundido</option>
                <option value="viejo">Viejo</option>
                <option value="nuevo">Nuevo</option>
                <option value="otro">Otro (especificar en notas)</option>
            </select>
            <label for="notas_estado">Notas (si seleccionaste "Otro" en estado):</label>
            <textarea id="notas_estado"></textarea>
            <label for="color">Color:</label>
            <select id="color" required>
                <option value="">-- Seleccionar --</option>
                <option value="dorado">Dorado</option>
                <option value="negro">Negro</option>
                <option value="blanco">Blanco</option>
                <option value="rojo">Rojo</option>
                <option value="azul">Azul</option>
                <option value="rosa">Rosa</option>
                <option value="violeta">Violeta</option>
                <option value="verde">Verde</option>
                <option value="amarillo">Amarillo</option>
                <option value="gris">Gris</option>
                <option value="naranja">Naranja</option>
                <option value="marron">Marr√≥n</option>
            </select>
            <label for="textura">Textura:</label>
            <select id="textura" required>
                <option value="">-- Seleccionar --</option>
                <option value="lisa">Lisa</option>
                <option value="aspera">√Åspera</option>
                <option value="pegajosa">Pegajosa</option>
                <option value="fria">Fr√≠a</option>
                <option value="caliente">Caliente</option>
                <option value="suave">Suave</option>
                <option value="dura">Dura</option>
                <option value="humeda">H√∫meda</option>
                <option value="seca">Seca</option>
                <option value="brillante">Brillante</option>
                <option value="opaca">Opaca</option>
            </select>
            <label for="tama√±o">Tama√±o:</label>
            <select id="tama√±o" required>
                <option value="">-- Seleccionar --</option>
                <option value="minusculo">Min√∫sculo</option>
                <option value="peque√±o">Peque√±o</option>
                <option value="mediano">Mediano</option>
                <option value="grande">Grande</option>
                <option value="gigante">Gigante</option>
            </select>
            <button type="submit">Analizar y Guardar</button>
        </form>
        <div id="analysisOutput"></div>
        <!-- Tabla de An√°lisis por Deportista -->
        <h3>An√°lisis por Deportista</h3>
        <select id="viewAthlete" onchange="loadAnalyses()">
            <option value="">-- Elegir Deportista --</option>
        </select>
        <table id="analysesTable" class="hidden">
            <thead>
                <tr>
                    <th>Objeto</th>
                    <th>Estado</th>
                    <th>Color</th>
                    <th>Textura</th>
                    <th>Tama√±o</th>
                    <th>Simbolismo</th>
                    <th>Trauma</th>
                    <th>Fecha An√°lisis</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <!-- Botones -->
        <button onclick="exportData()">Exportar Datos (CSV)</button>
        <button onclick="logout()">Cerrar Sesi√≥n</button>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Datos para an√°lisis (inspirados en Carl Jung)
            const objects = {
                "espejo": "Ego/Auto-percepci√≥n (Arquetipo de la Sombra)",
                "puerta": "Transiciones/Cambio (Arquetipo del Umbral)",
                "reloj": "Relaci√≥n con el Tiempo (Arquetipo del Viejo Sabio)",
                "libro": "Infancia/Aprendizaje (Arquetipo del Conocimiento)",
                "rio": "Emociones/Flujo (Arquetipo de la Gran Madre)",
                "vela": "Esperanza/Espiritualidad (Arquetipo de la Luz)",
                "puente": "Relaciones/Conexiones (Arquetipo de la Uni√≥n)",
                "llave": "Acceso/Secretos (Arquetipo de la Soluci√≥n)",
                "coche": "Autonom√≠a/Independencia (Arquetipo del Viaje)",
                "casa": "Familia/Hogar Interno (Arquetipo del Yo)"
            };
            const states = {
                "espejo": {
                    "roto": ["Fragmentaci√≥n del yo", "Trauma por auto-rechazo o identidad rota.", "¬øQu√© parte de ti no quieres ver? ¬øQu√© rompi√≥ el espejo?", "Visualiza el espejo reparado, entero, reflejando tu yo completo con claridad."],
                    "sucio": ["Confusi√≥n interna", "Bloqueos que nublan la auto-percepci√≥n.", "¬øQu√© ensucia tu reflejo? ¬øQu√© necesitas limpiar?", "Visualiza el espejo limpio, pulido, mostrando tu verdad."],
                    "limpio": ["Claridad de conciencia", "Progreso en integrar la sombra.", "¬øQu√© ves claramente ahora? ¬øQu√© te empodera?", "Mant√©n el espejo limpio, reflejando tu fuerza interior."],
                    "brillante": ["Integraci√≥n del yo", "Conexi√≥n con el inconsciente luminoso.", "¬øQu√© ilumina tu reflejo? ¬øQu√© te inspira?", "Visualiza el espejo brillando intensamente, amplificando tu luz interior."],
                    "oscuro": ["Sombra reprimida", "Miedo a enfrentar aspectos ocultos.", "¬øQu√© oculta la oscuridad? ¬øQu√© temes ver?", "Visualiza el espejo iluminado, revelando tu yo sin miedo."],
                    "abierto": ["Vulnerabilidad del yo", "Exposici√≥n excesiva de la psique.", "¬øQu√© expones al abrirte? ¬øQu√© necesitas proteger?", "Visualiza el espejo con un marco protector, reflejando solo lo esencial."],
                    "cerrado": ["Rechazo del yo", "Negaci√≥n de la auto-observaci√≥n.", "¬øPor qu√© evitas mirarte? ¬øQu√© temes descubrir?", "Visualiza el espejo abierto, invitando a la auto-aceptaci√≥n."],
                    "flotante": ["Desconexi√≥n del yo", "Evasi√≥n de la realidad interna.", "¬øPor qu√© flota tu reflejo? ¬øQu√© evitas?", "Visualiza el espejo anclado, conectado a tu verdad."],
                    "hundido": ["Depresi√≥n del yo", "Peso emocional que oculta la autoimagen.", "¬øQu√© hunde tu reflejo? ¬øQu√© carga llevas?", "Visualiza el espejo emergiendo, claro y ligero."],
                    "viejo": ["Apego al pasado", "Traumas antiguos que definen la autoimagen.", "¬øQu√© recuerdos guarda el espejo? ¬øQu√© necesitas soltar?", "Visualiza el espejo renovado, reflejando un presente libre."],
                    "nuevo": ["Renovaci√≥n del yo", "Oportunidad para redefinir la autoimagen.", "¬øQu√© nueva imagen ves? ¬øQu√© comienzas?", "Visualiza el espejo nuevo, reflejando un yo fortalecido."],
                    "otro": ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza el espejo seg√∫n las notas, en un estado ideal de claridad."]
                },
                "puerta": {
                    "roto": ["Transiciones bloqueadas", "Miedo al cambio o trauma por oportunidades perdidas.", "¬øQu√© rompi√≥ la puerta? ¬øQu√© temes cruzar?", "Visualiza la puerta reparada, abri√©ndose a nuevas posibilidades."],
                    "sucio": ["Barreras emocionales", "Resistencia al cambio por acumulaci√≥n de traumas.", "¬øQu√© ensucia la puerta? ¬øQu√© necesitas soltar?", "Visualiza la puerta limpia, lista para abrirse con facilidad."],
                    "limpio": ["Preparaci√≥n para el cambio", "Progreso en aceptar transiciones.", "¬øQu√© te permite avanzar? ¬øQu√© est√° claro?", "Mant√©n la puerta limpia, lista para cruzar con confianza."],
                    "brillante": ["Oportunidad luminosa", "Apertura a nuevas fases de vida.", "¬øQu√© ilumina el camino? ¬øQu√© te motiva?", "Visualiza la puerta brillando, invitando a un futuro positivo."],
                    "oscuro": ["Miedo al cambio", "Trauma que oscurece las transiciones.", "¬øQu√© oscurece la puerta? ¬øQu√© temes?", "Visualiza la puerta iluminada, abriendo un camino claro."],
                    "abierto": ["Receptividad al cambio", "Oportunidad para explorar el inconsciente.", "¬øQu√© hay al otro lado? ¬øEst√°s listo?", "Visualiza la puerta abierta, fluida y acogedora."],
                    "cerrado": ["Aislamiento defensivo", "Miedo a lo desconocido o trauma protector.", "¬øPor qu√© est√° cerrada? ¬øQu√© protege?", "Visualiza la puerta abri√©ndose lentamente, con seguridad."],
                    "flotante": ["Desconexi√≥n de transiciones", "Evasi√≥n de decisiones importantes.", "¬øPor qu√© flota la puerta? ¬øQu√© evitas decidir?", "Visualiza la puerta anclada, conectada a un camino firme."],
                    "hundido": ["Estancamiento en transiciones", "Peso que impide avanzar.", "¬øQu√© hunde la puerta? ¬øQu√© te retiene?", "Visualiza la puerta emergiendo, lista para abrirse."],
                    "viejo": ["Carga del pasado", "Transiciones bloqueadas por experiencias antiguas.", "¬øQu√© pasado guarda la puerta? ¬øQu√© necesitas soltar?", "Visualiza la puerta renovada, abriendo un presente libre."],
                    "nuevo": ["Renovaci√≥n de oportunidades", "Inicio de una nueva fase.", "¬øQu√© abre esta puerta? ¬øQu√© comienzas?", "Visualiza la puerta nueva, abriendo un futuro brillante."],
                    "otro": ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza la puerta seg√∫n las notas, en un estado ideal de apertura."]
                },
                "reloj": {
                    "roto": ["Ansiedad temporal", "Trauma por p√©rdida de control del tiempo.", "¬øQu√© detuvo el reloj? ¬øQu√© tiempo temes?", "Visualiza el reloj reparado, marcando un ritmo tranquilo."],
                    "sucio": ["Confusi√≥n temporal", "Bloqueos que nublan la percepci√≥n del tiempo.", "¬øQu√© ensucia el reloj? ¬øQu√© necesitas aclarar?", "Visualiza el reloj limpio, funcionando con precisi√≥n."],
                    "limpio": ["Claridad temporal", "Progreso en aceptar el flujo del tiempo.", "¬øQu√© controlas ahora? ¬øQu√© te da paz?", "Mant√©n el reloj limpio, marcando un ritmo arm√≥nico."],
                    "brillante": ["Armon√≠a con el tiempo", "Integraci√≥n del ritmo vital.", "¬øQu√© ilumina el reloj? ¬øQu√© aceptas?", "Visualiza el reloj brillando, en perfecta sincron√≠a."],
                    "oscuro": ["Miedo al tiempo", "Trauma por el paso inexorable del tiempo.", "¬øQu√© oscurece el reloj? ¬øQu√© temes perder?", "Visualiza el reloj iluminado, marcando un presente libre."],
                    "abierto": ["Exposici√≥n temporal", "Vulnerabilidad al ritmo de la vida.", "¬øQu√© expones en el tiempo? ¬øQu√© necesitas regular?", "Visualiza el reloj protegido, marcando un ritmo estable."],
                    "cerrado": ["Negaci√≥n del tiempo", "Resistencia a aceptar el paso del tiempo.", "¬øPor qu√© evitas el tiempo? ¬øQu√© temes?", "Visualiza el reloj abierto, funcionando con calma."],
                    "flotante": ["Desconexi√≥n temporal", "Evasi√≥n del presente.", "¬øPor qu√© flota el reloj? ¬øQu√© evitas vivir?", "Visualiza el reloj anclado, marcando el ahora."],
                    "hundido": ["Depresi√≥n temporal", "Peso que estanca el flujo del tiempo.", "¬øQu√© hunde el reloj? ¬øQu√© carga llevas?", "Visualiza el reloj emergiendo, marcando un tiempo ligero."],
                    "viejo": ["Nostalgia dolorosa", "Traumas relacionados con el pasado.", "¬øQu√© pasado marca el reloj? ¬øQu√© necesitas soltar?", "Visualiza el reloj renovado, marcando un presente libre."],
                    "nuevo": ["Renovaci√≥n temporal", "Oportunidad para un nuevo comienzo.", "¬øQu√© hora eliges? ¬øQu√© comienzas?", "Visualiza el reloj nuevo, marcando un futuro brillante."],
                    "otro": ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza el reloj seg√∫n las notas, en un estado ideal de sincron√≠a."]
                },
                "libro": {
                    "roto": ["Conocimiento fragmentado", "Trauma por secretos no resueltos.", "¬øQu√© p√°ginas faltan? ¬øQu√© verdad evitas?", "Visualiza el libro reparado, con todas las respuestas claras."],
                    "sucio": ["Sabidur√≠a nublada", "Confusi√≥n por creencias contaminadas.", "¬øQu√© ensucia las p√°ginas? ¬øQu√© necesitas limpiar?", "Visualiza el libro limpio, con letras n√≠tidas."],
                    "limpio": ["Acceso al conocimiento", "Progreso en aceptar verdades internas.", "¬øQu√© lees claramente? ¬øQu√© te empodera?", "Mant√©n el libro limpio, lleno de sabidur√≠a clara."],
                    "brillante": ["Sabidur√≠a iluminada", "Conexi√≥n con el inconsciente colectivo.", "¬øQu√© ilumina el libro? ¬øQu√© te inspira?", "Visualiza el libro brillando, revelando verdades profundas."],
                    "oscuro": ["Conocimiento reprimido", "Miedo a enfrentar verdades internas.", "¬øQu√© oculta el libro? ¬øQu√© temes leer?", "Visualiza el libro iluminado, con p√°ginas claras."],
                    "abierto": ["Receptividad al aprendizaje", "Oportunidad para descubrir verdades.", "¬øQu√© lees? ¬øQu√© descubres?", "Visualiza el libro abierto, revelando conocimiento curativo."],
                    "cerrado": ["Bloqueo intelectual", "Resistencia a enfrentar verdades.", "¬øPor qu√© est√° cerrado? ¬øQu√© temes leer?", "Visualiza el libro abri√©ndose, invitando a la comprensi√≥n."],
                    "flotante": ["Desconexi√≥n del conocimiento", "Evasi√≥n de verdades profundas.", "¬øPor qu√© flota el libro? ¬øQu√© evitas aprender?", "Visualiza el libro anclado, accesible y claro."],
                    "hundido": ["Sabidur√≠a abrumada", "Peso que oculta el aprendizaje.", "¬øQu√© hunde el libro? ¬øQu√© carga llevas?", "Visualiza el libro emergiendo, lleno de claridad."],
                    "viejo": ["Apego al pasado", "Traumas que limitan el aprendizaje.", "¬øQu√© historias guarda el libro? ¬øQu√© necesitas soltar?", "Visualiza el libro renovado, con p√°ginas frescas."],
                    "nuevo": ["Renovaci√≥n del aprendizaje", "Oportunidad para nuevas verdades.", "¬øQu√© escribes en el libro? ¬øQu√© comienzas?", "Visualiza el libro nuevo, lleno de posibilidades."],
                    "otro": ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza el libro seg√∫n las notas, en un estado ideal de claridad."]
                },
                "rio": {
                    "roto": ["Emociones fragmentadas", "Trauma por rupturas emocionales.", "¬øQu√© rompi√≥ el flujo? ¬øQu√© necesitas unir?", "Visualiza el r√≠o unido, fluyendo suavemente."],
                    "sucio": ["Emociones reprimidas", "Trauma por acumulaci√≥n emocional.", "¬øQu√© contamina el r√≠o? ¬øQu√© necesitas soltar?", "Visualiza el r√≠o limpio, claro y fluido."],
                    "limpio": ["Paz emocional", "Progreso en liberar emociones.", "¬øQu√© te da calma? ¬øQu√© fluye libremente?", "Mant√©n el r√≠o limpio, fluyendo con paz."],
                    "brillante": ["Flujo vital", "Armon√≠a emocional y renovaci√≥n.", "¬øQu√© ilumina el r√≠o? ¬øQu√© te revitaliza?", "Visualiza el r√≠o brillando, lleno de vida."],
                    "oscuro": ["Emociones reprimidas", "Miedo a sentir profundamente.", "¬øQu√© oscurece el r√≠o? ¬øQu√© temes sentir?", "Visualiza el r√≠o iluminado, fluyendo con claridad."],
                    "abierto": ["Libertad emocional", "Receptividad a sentimientos profundos.", "¬øQu√© fluye libremente? ¬øQu√© aceptas?", "Visualiza el r√≠o abierto, llevando emociones positivas."],
                    "cerrado": ["Emociones bloqueadas", "Resistencia a sentir.", "¬øPor qu√© est√° estancado? ¬øQu√© temes liberar?", "Visualiza el r√≠o abri√©ndose, fluyendo libremente."],
                    "flotante": ["Desconexi√≥n emocional", "Evasi√≥n de sentimientos profundos.", "¬øPor qu√© flota el r√≠o? ¬øQu√© evitas sentir?", "Visualiza el r√≠o anclado, conectado a tus emociones."],
                    "hundido": ["Depresi√≥n emocional", "Peso que estanca el flujo.", "¬øQu√© hunde el r√≠o? ¬øQu√© carga llevas?", "Visualiza el r√≠o emergiendo, ligero y claro."],
                    "viejo": ["Emociones antiguas", "Traumas emocionales del pasado.", "¬øQu√© pasado guarda el r√≠o? ¬øQu√© necesitas soltar?", "Visualiza el r√≠o renovado, fluyendo en el presente."],
                    "nuevo": ["Renovaci√≥n emocional", "Oportunidad para un nuevo flujo.", "¬øQu√© nuevas emociones fluyen? ¬øQu√© comienzas?", "Visualiza el r√≠o nuevo, fluyendo con energ√≠a."],
                    "otro": ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza el r√≠o seg√∫n las notas, en un estado ideal de fluidez."]
                },
                "vela": {
                    "roto": ["Fragilidad espiritual", "Trauma por p√©rdida de fe o gu√≠a.", "¬øQu√© rompi√≥ la vela? ¬øQu√© temes perder?", "Visualiza la vela reparada, ardiendo con fuerza."],
                    "sucio": ["Espiritualidad nublada", "Confusi√≥n en la conexi√≥n interna.", "¬øQu√© ensucia la vela? ¬øQu√© necesitas limpiar?", "Visualiza la vela limpia, con una llama pura."],
                    "limpio": ["Claridad espiritual", "Progreso en encontrar gu√≠a interna.", "¬øQu√© ilumina la vela? ¬øQu√© te da paz?", "Mant√©n la vela limpia, ardiendo con calma."],
                    "brillante": ["Iluminaci√≥n espiritual", "Conexi√≥n con el alma.", "¬øQu√© ves en la luz? ¬øQu√© te inspira?", "Visualiza la vela brillando intensamente, gui√°ndote."],
                    "oscuro": ["P√©rdida de esperanza", "Miedo a la oscuridad interna.", "¬øQu√© apag√≥ la vela? ¬øQu√© temes?", "Visualiza la vela encendida, iluminando tu interior."],
                    "abierto": ["Vulnerabilidad espiritual", "Exposici√≥n de la fe interna.", "¬øQu√© expones con la luz? ¬øQu√© necesitas proteger?", "Visualiza la vela protegida, con una llama estable."],
                    "cerrado": ["Negaci√≥n espiritual", "Resistencia a conectar con el alma.", "¬øPor qu√© est√° apagada? ¬øQu√© temes sentir?", "Visualiza la vela encendida, conectando con tu esp√≠ritu."],
                    "flotante": ["Desconexi√≥n espiritual", "Evasi√≥n de la gu√≠a interna.", "¬øPor qu√© flota la vela? ¬øQu√© evitas conectar?", "Visualiza la vela anclada, con una llama firme."],
                    "hundido": ["Depresi√≥n espiritual", "Peso que apaga la luz interna.", "¬øQu√© hunde la vela? ¬øQu√© carga llevas?", "Visualiza la vela emergiendo, ardiendo con claridad."],
                    "viejo": ["Fe agotada", "Traumas espirituales antiguos.", "¬øQu√© pasado guarda la vela? ¬øQu√© necesitas soltar?", "Visualiza la vela renovada, con una llama fresca."],
                    "nuevo": ["Renovaci√≥n espiritual", "Oportunidad para una nueva luz.", "¬øQu√© enciende esta vela? ¬øQu√© comienzas?", "Visualiza la vela nueva, ardiendo con fuerza."],
                    "otro": ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza la vela seg√∫n las notas, en un estado ideal de luz."]
                },
                "puente": {
                    "roto": ["Relaciones fracturadas", "Trauma por conflictos no resueltos.", "¬øQu√© rompi√≥ el puente? ¬øQu√© separa?", "Visualiza el puente reparado, uniendo tus relaciones."],
                    "sucio": ["Conexiones nubladas", "Dificultad para conectar por traumas.", "¬øQu√© ensucia el puente? ¬øQu√© necesitas limpiar?", "Visualiza el puente limpio, facilitando conexiones."],
                    "limpio": ["Conexiones claras", "Progreso en fortalecer relaciones.", "¬øQu√© une el puente? ¬øQu√© te conecta?", "Mant√©n el puente limpio, s√≥lido y accesible."],
                    "brillante": ["Relaciones luminosas", "Armon√≠a en conexiones internas y externas.", "¬øQu√© ilumina el puente? ¬øQu√© te une?", "Visualiza el puente brillando, fortaleciendo lazos."],
                    "oscuro": ["Aislamiento relacional", "Miedo a conectar con otros.", "¬øQu√© oscurece el puente? ¬øQu√© temes unir?", "Visualiza el puente iluminado, conectando con claridad."],
                    "abierto": ["Conexi√≥n libre", "Receptividad a relaciones profundas.", "¬øQu√© une el puente? ¬øQu√© aceptas?", "Visualiza el puente abierto, facilitando conexiones."],
                    "cerrado": ["Aislamiento protector", "Miedo a conectar con el otro lado.", "¬øPor qu√© est√° cerrado? ¬øQu√© temes cruzar?", "Visualiza el puente abri√©ndose, seguro para conectar."],
                    "flotante": ["Desconexi√≥n relacional", "Evasi√≥n de v√≠nculos profundos.", "¬øPor qu√© flota el puente? ¬øQu√© evitas conectar?", "Visualiza el puente anclado, uniendo con firmeza."],
                    "hundido": ["Colapso relacional", "Peso que impide conexiones.", "¬øQu√© hunde el puente? ¬øQu√© carga llevas?", "Visualiza el puente emergiendo, s√≥lido y claro."],
                    "viejo": ["Relaciones antiguas", "Traumas en v√≠nculos pasados.", "¬øQu√© pasado guarda el puente? ¬øQu√© necesitas soltar?", "Visualiza el puente renovado, conectando el presente."],
                    "nuevo": ["Renovaci√≥n relacional", "Oportunidad para nuevos lazos.", "¬øQu√© une este puente? ¬øQu√© comienzas?", "Visualiza el puente nuevo, fortaleciendo conexiones."],
                    "otro": ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza el puente seg√∫n las notas, en un estado ideal de uni√≥n."]
                },
                "llave": {
                    "roto": ["Frustraci√≥n", "P√©rdida de acceso a soluciones.", "¬øQu√© soluci√≥n perdiste? ¬øQu√© necesitas recuperar?", "Visualiza una llave nueva, desbloqueando oportunidades."],
                    "sucio": ["Bloqueos", "Trauma por soluciones estancadas.", "¬øQu√© te bloquea? ¬øQu√© necesitas pulir?", "Visualiza la llave limpia, pulida, abriendo con facilidad."],
                    "limpio": ["Acceso claro", "Progreso en encontrar soluciones.", "¬øQu√© abre esta llave? ¬øQu√© te empodera?", "Mant√©n la llave limpia, lista para desbloquear."],
                    "brillante": ["Oportunidades luminosas", "Conexi√≥n con soluciones claras.", "¬øQu√© ilumina la llave? ¬øQu√© te inspira?", "Visualiza la llave brillando, abriendo caminos claros."],
                    "oscuro": ["Secretos ocultos", "Miedo a desbloquear verdades.", "¬øQu√© oculta la llave? ¬øQu√© temes abrir?", "Visualiza la llave iluminada, desbloqueando con confianza."],
                    "abierto": ["Acceso libre", "Receptividad a soluciones.", "¬øQu√© abre esta llave? ¬øQu√© aceptas?", "Visualiza la llave funcionando, abriendo puertas libremente."],
                    "cerrado": ["Bloqueo defensivo", "Resistencia a desbloquear.", "¬øPor qu√© no abre? ¬øQu√© temes liberar?", "Visualiza la llave girando, abriendo con seguridad."],
                    "flotante": ["Desconexi√≥n de soluciones", "Evasi√≥n de respuestas claras.", "¬øPor qu√© flota la llave? ¬øQu√© evitas desbloquear?", "Visualiza la llave anclada, lista para abrir."],
                    "hundido": ["P√©rdida de acceso", "Peso que bloquea soluciones.", "¬øQu√© hunde la llave? ¬øQu√© carga llevas?", "Visualiza la llave emergiendo, lista para desbloquear."],
                    "viejo": ["Secretos antiguos", "Traumas que bloquean el acceso.", "¬øQu√© pasado guarda la llave? ¬øQu√© necesitas soltar?", "Visualiza la llave renovada, abriendo el presente."],
                    "nuevo": ["Oportunidades", "Oportunidad para nuevas soluciones.", "¬øQu√© abre esta llave? ¬øQu√© comienzas?", "Visualiza la llave nueva, desbloqueando un futuro brillante."],
                    "otro": ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza la llave seg√∫n las notas, en un estado ideal de acceso."]
                },
                "coche": {
                    "roto": ["P√©rdida de control", "Trauma por estancamiento o accidentes.", "¬øQu√© rompi√≥ el coche? ¬øA d√≥nde no llegas?", "Visualiza el coche reparado, avanzando con confianza."],
                    "sucio": ["Desorden vital", "Confusi√≥n en el rumbo de vida.", "¬øQu√© ensucia el coche? ¬øQu√© necesitas limpiar?", "Visualiza el coche limpio, listo para el viaje."],
                    "limpio": ["Direcci√≥n clara", "Progreso en el control del rumbo.", "¬øA d√≥nde te lleva el coche? ¬øQu√© te empodera?", "Mant√©n el coche limpio, avanzando con claridad."],
                    "brillante": ["Autonom√≠a luminosa", "Conexi√≥n con el viaje personal.", "¬øQu√© ilumina el coche? ¬øQu√© te impulsa?", "Visualiza el coche brillando, en ruta al √©xito."],
                    "oscuro": ["Miedo al rumbo", "Trauma por p√©rdida de direcci√≥n.", "¬øQu√© oscurece el coche? ¬øQu√© temes?", "Visualiza el coche iluminado, avanzando con confianza."],
                    "abierto": ["Vulnerabilidad en el viaje", "Exposici√≥n excesiva en el rumbo.", "¬øQu√© expones en el viaje? ¬øQu√© necesitas proteger?", "Visualiza el coche protegido, avanzando con seguridad."],
                    "cerrado": ["Bloqueo del rumbo", "Resistencia a avanzar.", "¬øPor qu√© est√° detenido? ¬øQu√© temes?", "Visualiza el coche abierto, listo para moverse."],
                    "flotante": ["Desconexi√≥n del rumbo", "Evasi√≥n del camino personal.", "¬øPor qu√© flota el coche? ¬øQu√© evitas avanzar?", "Visualiza el coche anclado, en un camino firme."],
                    "hundido": ["Estancamiento vital", "Peso que impide avanzar.", "¬øQu√© hunde el coche? ¬øQu√© carga llevas?", "Visualiza el coche emergiendo, listo para avanzar."],
                    "viejo": ["Carga del pasado", "Traumas que frenan el rumbo.", "¬øQu√© pasado guarda el coche? ¬øQu√© necesitas soltar?", "Visualiza el coche renovado, avanzando en el presente."],
                    "nuevo": ["Renovaci√≥n del rumbo", "Oportunidad para un nuevo camino.", "¬øA d√≥nde va este coche? ¬øQu√© comienzas?", "Visualiza el coche nuevo, avanzando con energ√≠a."],
                    "otro": ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza el coche seg√∫n las notas, en un estado ideal de movimiento."]
                },
                "casa": {
                    "roto": ["Inestabilidad interna", "Trauma por inseguridad en el hogar o yo.", "¬øQu√© rompi√≥ la casa? ¬øQu√© te desestabiliza?", "Visualiza la casa reparada, fuerte y acogedora."],
                    "sucio": ["Carga emocional", "Traumas acumulados en el yo.", "¬øQu√© ensucia la casa? ¬øQu√© necesitas limpiar?", "Visualiza la casa limpia, como un santuario."],
                    "limpio": ["Seguridad interna", "Progreso en construir un yo s√≥lido.", "¬øQu√© te da paz? ¬øQu√© te fortalece?", "Mant√©n la casa limpia, acogiendo tu fuerza interior."],
                    "brillante": ["Integraci√≥n del yo", "Armon√≠a interna y seguridad.", "¬øQu√© ilumina la casa? ¬øQu√© te fortalece?", "Visualiza la casa brillando, llena de paz."],
                    "oscuro": ["Aislamiento interno", "Miedo a conectar con el yo.", "¬øQu√© oscurece la casa? ¬øQu√© temes?", "Visualiza la casa iluminada, acogedora y clara."],
                    "abierto": ["Vulnerabilidad interna", "Exposici√≥n del yo a influencias externas.", "¬øQu√© expones en la casa? ¬øQu√© necesitas proteger?", "Visualiza la casa abierta, pero protegida, acogiendo positividad."],
                    "cerrado": ["Aislamiento protector", "Miedo a abrirte al mundo.", "¬øPor qu√© est√° cerrada? ¬øQu√© temes?", "Visualiza la casa abri√©ndose, recibiendo energ√≠a positiva."],
                    "flotante": ["Desconexi√≥n del yo", "Evasi√≥n de la estabilidad interna.", "¬øPor qu√© flota la casa? ¬øQu√© evitas anclar?", "Visualiza la casa anclada, s√≥lida y segura."],
                    "hundido": ["Depresi√≥n interna", "Peso que colapsa el yo.", "¬øQu√© hunde la casa? ¬øQu√© carga llevas?", "Visualiza la casa emergiendo, fuerte y clara."],
                    "viejo": ["Carga familiar", "Traumas heredados del pasado.", "¬øQu√© pasado guarda la casa? ¬øQu√© necesitas soltar?", "Visualiza la casa renovada, acogiendo el presente."],
                    "nuevo": ["Renovaci√≥n del yo", "Oportunidad para un nuevo hogar interno.", "¬øQu√© construyes en esta casa? ¬øQu√© comienzas?", "Visualiza la casa nueva, llena de paz y fuerza."],
                    "otro": ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza la casa seg√∫n las notas, en un estado ideal de seguridad."]
                }
            };
            const colors = {
                "dorado": ["Divinidad, integraci√≥n total", "¬øQu√© te hace sentir valioso? Visualiza brillar."],
                "negro": ["Sombra, misterio, introspecci√≥n profunda", "¬øQu√© te hace sentir aislado? Imagina a√±adir luz."],
                "blanco": ["Pureza, claridad, nuevo comienzo", "¬øQu√© te da paz? Reinicia el pasado."],
                "rojo": ["Pasi√≥n, urgencia, emociones intensas", "¬øQu√© te hace sentir intenso? Visualiza calmar."],
                "azul": ["Calma, estabilidad, serenidad", "¬øQu√© te da tranquilidad? Estabiliza."],
                "rosa": ["Amor propio, vulnerabilidad, afecto", "¬øQu√© te hace sentir vulnerable? A√±ade afecto."],
                "violeta": ["Transformaci√≥n, espiritualidad", "¬øQu√© te conecta con lo profundo? Transforma."],
                "verde": ["Crecimiento, conexi√≥n con la naturaleza", "¬øQu√© te hace crecer? Conecta con la vida."],
                "amarillo": ["Intuici√≥n, iluminaci√≥n", "¬øQu√© te inspira? Visualiza claridad."],
                "gris": ["Neutralidad, ambig√ºedad", "¬øQu√© te confunde? Busca claridad."],
                "naranja": ["Creatividad, entusiasmo", "¬øQu√© te energiza? Amplifica esa energ√≠a."],
                "marron": ["Estabilidad, ra√≠ces terrenales", "¬øQu√© te ancla? Fortalece tus ra√≠ces."]
            };
            const textures = {
                "lisa": ["Armon√≠a, fluidez emocional", "¬øQu√© te hace sentir en paz? Suaviza la superficie."],
                "aspera": ["Conflictos internos, heridas no sanadas", "¬øQu√© conflicto te irrita? Pule la aspereza."],
                "pegajosa": ["Apegos emocionales, codependencia", "¬øQu√© te mantiene atado? Limpia la pegajosidad."],
                "fria": ["Desconexi√≥n emocional, aislamiento", "¬øQu√© te hace sentir distante? A√±ade calor."],
                "caliente": ["Pasi√≥n restaurada, vitalidad", "¬øQu√© te da energ√≠a vital? Infunde calor."],
                "suave": ["Receptividad, calma", "¬øQu√© te calma? Mant√©n la suavidad."],
                "dura": ["Rigidez defensiva", "¬øQu√© te endurece? Suaviza tu interior."],
                "humeda": ["Emociones fluidas", "¬øQu√© emociones fluyen? Acepta el flujo."],
                "seca": ["Aridez espiritual", "¬øQu√© te dej√≥ seco? Hidrata tu alma."],
                "brillante": ["Claridad, energ√≠a", "¬øQu√© te ilumina? Amplifica la luz."],
                "opaca": ["Confusi√≥n, bloqueo", "¬øQu√© te nubla? Busca claridad."]
            };
            const sizes = {
                "minusculo": ["Insignificancia, inseguridad", "¬øQu√© te hace sentir peque√±o? Visualiza agrandar."],
                "peque√±o": ["Minimizaci√≥n, modestia", "¬øQu√© minimizas? Ajusta la perspectiva."],
                "mediano": ["Equilibrio, estabilidad", "¬øQu√© te mantiene en balance? Mant√©n el equilibrio."],
                "grande": ["Abrumador, ego inflado", "¬øQu√© te abruma? Visualiza reducir."],
                "gigante": ["Amenaza amplificada", "¬øQu√© te parece inmenso? Redimensiona."]
            };
            const tips = [
                "Agradecimiento al cuerpo: Dedica 2-3 min diarios a agradecer a tu coraz√≥n, pulmones, etc., diciendo: 'Gracias por sostenerme'. Visualiza gratitud para sanar.",
                "Manifestaci√≥n en presente: Repite 2 min al d√≠a afirmaciones como 'Soy paz'. Siente que ya es real para reprogramar creencias.",
                "Respiraci√≥n cuadrada: Inhala 4 seg, reten 4, exhala 4, reten 4. Repite 5-10 veces (3-5 min) visualizando disolver tensiones.",
                "Visualizaci√≥n de luz sanadora: Visualiza 3-5 min luz dorada entrando por tu coronilla, disolviendo dolores emocionales como niebla al sol.",
                "Afirmaciones con espejo: M√≠rate al espejo 1-2 min, di 'Soy amor, soy luz'. Siente las palabras resonar para sanar autoestima.",
                "Respiraci√≥n cham√°nica: Inhala 4 seg, reten 4, exhala 4, libera humo negro. Repite 10 veces (2-3 min) para limpiar energ√≠as estancadas.",
                "Diario de gratitud: Escribe 5 min cada noche 3 gratitudes y una herida a liberar, visualiz√°ndola como flor que crece.",
                "Visualizaci√≥n de gu√≠as: Dedica 3-5 min a imaginar un gu√≠a (animal, luz) que te ayuda a sanar. Pregunta: '¬øQu√© necesito liberar?'.",
                "Manifestaci√≥n con agua: Infunde un vaso de agua con 'Esta agua limpia mis heridas' (2 min). B√©belo visualizando purificaci√≥n.",
                "C√≠rculo de luz: Visualiza 3-5 min un c√≠rculo de luz protectora, diciendo: 'Estoy sanado, estoy completo' para integrar sanaci√≥n."
            ];
            // Login
            const adminUser = "admin";
            const adminPass = "mindsight123"; // Corregido para coincidir con el mensaje de error
            const loginForm = document.getElementById("loginForm");
            if (loginForm) {
                loginForm.addEventListener("submit", function(e) {
                    e.preventDefault();
                    const user = document.getElementById("username").value.trim();
                    const pass = document.getElementById("password").value.trim();
                    if (user === adminUser && pass === adminPass) {
                        document.getElementById("login").classList.add("hidden");
                        document.getElementById("dashboard").classList.remove("hidden");
                        loadAthletes();
                        loadAthleteSelects();
                    } else {
                        alert("Usuario o contrase√±a incorrectos. Usa: admin / mindsight123");
                    }
                });
            } else {
                console.error("Elemento loginForm no encontrado.");
            }
            function logout() {
                document.getElementById("dashboard").classList.add("hidden");
                document.getElementById("login").classList.remove("hidden");
            }
            // Actualizar estados seg√∫n objeto (usamos estados globales, no din√°micos por objeto)
            const estadoSelect = document.getElementById("estado");
            if (estadoSelect) {
                const estados = ["roto", "sucio", "limpio", "brillante", "oscuro", "abierto", "cerrado", "flotante", "hundido", "viejo", "nuevo", "otro"];
                estados.forEach(estado => {
                    const option = document.createElement("option");
                    option.value = estado;
                    option.text = estado.charAt(0).toUpperCase() + estado.slice(1);
                    estadoSelect.appendChild(option);
                });
            }
            // Llenar selects para an√°lisis y visualizaci√≥n
            function loadAthleteSelects() {
                const athletes = getAthletes();
                const analysisSelect = document.getElementById("athleteIdForAnalysis");
                const viewSelect = document.getElementById("viewAthlete");
                analysisSelect.innerHTML = "<option value=''>-- Elegir --</option>";
                viewSelect.innerHTML = "<option value=''>-- Elegir Deportista --</option>";
                athletes.forEach(athlete => {
                    const optionAnalysis = document.createElement("option");
                    optionAnalysis.value = athlete.id;
                    optionAnalysis.text = `${athlete.nombre} ${athlete.apellidos}`;
                    analysisSelect.appendChild(optionAnalysis);
                    const optionView = document.createElement("option");
                    optionView.value = athlete.id;
                    optionView.text = `${athlete.nombre} ${athlete.apellidos}`;
                    viewSelect.appendChild(optionView);
                });
            }
            // Obtener deportistas
            function getAthletes() {
                return JSON.parse(localStorage.getItem("athletes")) || [];
            }
            // Guardar deportista
            const athleteForm = document.getElementById("athleteForm");
            if (athleteForm) {
                athleteForm.addEventListener("submit", function(e) {
                    e.preventDefault();
                    const athlete = {
                        id: Date.now().toString(),
                        nombre: document.getElementById("nombre").value,
                        apellidos: document.getElementById("apellidos").value,
                        telefono: document.getElementById("telefono").value,
                        mail: document.getElementById("mail").value,
                        deporte: document.getElementById("deporte").value,
                        fecha_nacimiento: document.getElementById("fecha_nacimiento").value,
                        hora_nacimiento: document.getElementById("hora_nacimiento").value,
                        analyses: []
                    };
                    let athletes = getAthletes();
                    athletes.push(athlete);
                    localStorage.setItem("athletes", JSON.stringify(athletes));
                    loadAthletes();
                    loadAthleteSelects();
                    athleteForm.reset();
                    alert("Deportista guardado.");
                });
            } else {
                console.error("Elemento athleteForm no encontrado.");
            }
            // Cargar tabla deportistas con edici√≥n inline
            function loadAthletes() {
                const tableBody = document.getElementById("athletesTable").querySelector("tbody");
                tableBody.innerHTML = "";
                const athletes = getAthletes();
                athletes.forEach(athlete => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${athlete.id}</td>
                        <td>
                            <span class="display">${athlete.nombre}</span>
                            <input type="text" class="edit-field" id="edit-nombre-${athlete.id}" value="${athlete.nombre}">
                        </td>
                        <td>
                            <span class="display">${athlete.apellidos}</span>
                            <input type="text" class="edit-field" id="edit-apellidos-${athlete.id}" value="${athlete.apellidos}">
                        </td>
                        <td>
                            <span class="display">${athlete.telefono}</span>
                            <input type="tel" class="edit-field" id="edit-telefono-${athlete.id}" value="${athlete.telefono}">
                        </td>
                        <td>
                            <span class="display">${athlete.mail}</span>
                            <input type="email" class="edit-field" id="edit-mail-${athlete.id}" value="${athlete.mail}">
                        </td>
                        <td>
                            <span class="display">${athlete.deporte}</span>
                            <input type="text" class="edit-field" id="edit-deporte-${athlete.id}" value="${athlete.deporte}">
                        </td>
                        <td>
                            <span class="display">${athlete.fecha_nacimiento}</span>
                            <input type="date" class="edit-field" id="edit-fecha_nacimiento-${athlete.id}" value="${athlete.fecha_nacimiento}">
                        </td>
                        <td>
                            <span class="display">${athlete.hora_nacimiento}</span>
                            <input type="time" class="edit-field" id="edit-hora_nacimiento-${athlete.id}" value="${athlete.hora_nacimiento}">
                        </td>
                        <td>${athlete.analyses.length}</td>
                        <td>
                            <button class="edit-btn" onclick="toggleEdit('${athlete.id}', 'nombre')">‚úèÔ∏è</button>
                            <button class="edit-btn" onclick="toggleEdit('${athlete.id}', 'apellidos')">‚úèÔ∏è</button>
                            <button class="edit-btn" onclick="toggleEdit('${athlete.id}', 'telefono')">‚úèÔ∏è</button>
                            <button class="edit-btn" onclick="toggleEdit('${athlete.id}', 'mail')">‚úèÔ∏è</button>
                            <button class="edit-btn" onclick="toggleEdit('${athlete.id}', 'deporte')">‚úèÔ∏è</button>
                            <button class="edit-btn" onclick="toggleEdit('${athlete.id}', 'fecha_nacimiento')">‚úèÔ∏è</button>
                            <button class="edit-btn" onclick="toggleEdit('${athlete.id}', 'hora_nacimiento')">‚úèÔ∏è</button>
                            <button class="save-btn hidden" id="save-${athlete.id}" onclick="saveEdit('${athlete.id}')">Guardar</button>
                            <button class="delete-btn" onclick="deleteAthlete('${athlete.id}')">üóëÔ∏è</button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            }
            // Edici√≥n inline
            function toggleEdit(id, field) {
                const display = document.querySelector(`#athletesTable tr td:nth-child(${field === 'nombre' ? 2 : field === 'apellidos' ? 3 : field === 'telefono' ? 4 : field === 'mail' ? 5 : field === 'deporte' ? 6 : field === 'fecha_nacimiento' ? 7 : 8}) .display`);
                const input = document.getElementById(`edit-${field}-${id}`);
                const saveBtn = document.getElementById(`save-${id}`);
                if (display && input && saveBtn) {
                    display.style.display = display.style.display === 'none' ? 'inline' : 'none';
                    input.style.display = input.style.display === 'none' ? 'inline' : 'none';
                    saveBtn.classList.toggle('hidden');
                }
            }
            function saveEdit(id) {
                const athletes = getAthletes();
                const athlete = athletes.find(a => a.id === id);
                if (athlete) {
                    athlete.nombre = document.getElementById(`edit-nombre-${id}`).value || athlete.nombre;
                    athlete.apellidos = document.getElementById(`edit-apellidos-${id}`).value || athlete.apellidos;
                    athlete.telefono = document.getElementById(`edit-telefono-${id}`).value || athlete.telefono;
                    athlete.mail = document.getElementById(`edit-mail-${id}`).value || athlete.mail;
                    athlete.deporte = document.getElementById(`edit-deporte-${id}`).value || athlete.deporte;
                    athlete.fecha_nacimiento = document.getElementById(`edit-fecha_nacimiento-${id}`).value || athlete.fecha_nacimiento;
                    athlete.hora_nacimiento = document.getElementById(`edit-hora_nacimiento-${id}`).value || athlete.hora_nacimiento;
                    localStorage.setItem("athletes", JSON.stringify(athletes));
                    loadAthletes();
                    loadAthleteSelects();
                    alert("Deportista actualizado.");
                }
            }
            // Eliminar deportista
            function deleteAthlete(id) {
                if (confirm("¬øEst√°s seguro de que quieres eliminar este deportista y todos sus an√°lisis?")) {
                    let athletes = getAthletes();
                    athletes = athletes.filter(a => a.id !== id);
                    localStorage.setItem("athletes", JSON.stringify(athletes));
                    loadAthletes();
                    loadAthleteSelects();
                    alert("Deportista eliminado.");
                }
            }
            // An√°lisis de objeto
            const analysisForm = document.getElementById("analysisForm");
            if (analysisForm) {
                analysisForm.addEventListener("submit", function(e) {
                    e.preventDefault();
                    const athleteId = document.getElementById("athleteIdForAnalysis").value;
                    if (!athleteId) {
                        alert("Selecciona un deportista.");
                        return;
                    }
                    const obj = document.getElementById("objeto").value;
                    const st = document.getElementById("estado").value;
                    const col = document.getElementById("color").value;
                    const tex = document.getElementById("textura").value;
                    const siz = document.getElementById("tama√±o").value;
                    const notas = document.getElementById("notas_estado").value;
                    if (!obj || !st || !col || !tex || !siz) {
                        alert("Completa todos los campos del an√°lisis.");
                        return;
                    }
                    if (st === "otro" && !notas) {
                        alert("Especifica notas para el estado 'Otro'.");
                        return;
                    }
                    // Generar an√°lisis
                    const psique = objects[obj] || "No encontrado";
                    const stateData = states[obj] && states[obj][st] ? states[obj][st] : ["Definido por notas", "Trauma personalizado.", "Especifica en notas qu√© simboliza este estado.", "Visualiza el objeto seg√∫n las notas, en un estado ideal."];
                    const stateInterp = stateData[0];
                    const stateTrauma = stateData[1];
                    const stateQuestions = stateData[2];
                    const stateHealing = stateData[3];
                    const colorData = colors[col] || ["No encontrado", ""];
                    const colorInterp = colorData[0];
                    const colorQuestions = colorData[1];
                    const textureData = textures[tex] || ["No encontrado", ""];
                    const textureInterp = textureData[0];
                    const textureQuestions = textureData[1];
                    const sizeData = sizes[siz] || ["No encontrado", ""];
                    const sizeInterp = sizeData[0];
                    const sizeQuestions = sizeData[1];
                    const symbolism = `El ${obj} (${psique}) en estado ${st}${notas ? ` (${notas})` : ""} simboliza ${stateInterp.toLowerCase()}, influenciado por el color ${col} (${colorInterp.toLowerCase()}), la textura ${tex} (${textureInterp.toLowerCase()}) y el tama√±o ${siz} (${sizeInterp.toLowerCase()}). Representa un aspecto de ${psique.toLowerCase()} en el inconsciente.`;
                    const trauma = `Posible trauma: ${stateTrauma} Modificado por ${colorInterp.toLowerCase()} (e.g., ${colorQuestions.split('?')[0]}?), con sensaci√≥n de ${textureInterp.toLowerCase()} (e.g., ${textureQuestions.split('?')[0]}?) y percepci√≥n de ${sizeInterp.toLowerCase()} (e.g., ${sizeQuestions.split('?')[0]}?). En la vida, esto puede manifestarse como ${stateInterp.toLowerCase()} en ${psique.toLowerCase()}. En el deporte, afecta el rendimiento por ${stateTrauma.toLowerCase()}.`;
                    const questions = `Preguntas para explorar: ${stateQuestions} ${colorQuestions} ${textureQuestions} ${sizeQuestions}${notas ? ` ¬øC√≥mo describe las notas este estado?` : ""}`;
                    const healing = notas && st === "otro" ? `Visualiza el ${obj} seg√∫n las notas: ${notas}, en un estado ideal (limpio, entero, brillante, equilibrado).` : stateHealing;
                    // Asignar tip
                    const athletes = getAthletes();
                    const athleteIndex = athletes.findIndex(a => a.id === athleteId);
                    const tipIndex = athleteIndex !== -1 && athletes[athleteIndex].analyses ? athletes[athleteIndex].analyses.length % 10 : 0;
                    const tip = tips[tipIndex];
                    // Guardar an√°lisis
                    if (athleteIndex !== -1) {
                        const analysis = {
                            objeto: obj,
                            estado: st,
                            color: col,
                            textura: tex,
                            tama√±o: siz,
                            notas: notas,
                            simbolismo: symbolism,
                            trauma: trauma,
                            preguntas: questions,
                            sanacion: healing,
                            tip: tip,
                            fecha: new Date().toISOString()
                        };
                        athletes[athleteIndex].analyses.push(analysis);
                        localStorage.setItem("athletes", JSON.stringify(athletes));
                        loadAthletes();
                        loadAthleteSelects();
                        alert("An√°lisis guardado para el deportista.");
                    }
                    // Mostrar resultado
                    document.getElementById("analysisOutput").innerHTML = `
                        <h4>An√°lisis Guardado para ${athletes[athleteIndex].nombre} ${athletes[athleteIndex].apellidos}:</h4>
                        <p><strong>Representaci√≥n/Simbolismo:</strong> ${symbolism}</p>
                        <p><strong>Significado y Trauma:</strong> ${trauma}</p>
                        <p><strong>Preguntas para Explorar:</strong> ${questions}</p>
                        <p><strong>C√≥mo Sanarlo:</strong> ${healing}</p>
                        <p><strong>Tarea Diaria (Tip):</strong> ${tip}</p>
                    `;
                });
            } else {
                console.error("Elemento analysisForm no encontrado.");
            }
            // Cargar an√°lisis por deportista
            function loadAnalyses() {
                const athleteId = document.getElementById("viewAthlete").value;
                const tableBody = document.getElementById("analysesTable").querySelector("tbody");
                const table = document.getElementById("analysesTable");
                table.classList.add("hidden");
                tableBody.innerHTML = "";
                if (athleteId) {
                    const athletes = getAthletes();
                    const athlete = athletes.find(a => a.id === athleteId);
                    if (athlete && athlete.analyses.length > 0) {
                        athlete.analyses.forEach(analysis => {
                            const row = document.createElement("tr");
                            row.innerHTML = `
                                <td>${analysis.objeto}</td>
                                <td>${analysis.estado}${analysis.notas ? ` (${analysis.notas})` : ""}</td>
                                <td>${analysis.color}</td>
                                <td>${analysis.textura}</td>
                                <td>${analysis.tama√±o}</td>
                                <td>${analysis.simbolismo.substring(0, 50)}...</td>
                                <td>${analysis.trauma.substring(0, 50)}...</td>
                                <td>${new Date(analysis.fecha).toLocaleDateString()}</td>
                            `;
                            tableBody.appendChild(row);
                        });
                        table.classList.remove("hidden");
                    } else {
                        alert("No hay an√°lisis para este deportista.");
                    }
                }
            }
            // Exportar a CSV
            function exportData() {
                const athletes = getAthletes();
                let csv = "ID,Nombre,Apellidos,Telefono,Email,Deporte,Fecha Nacimiento,Hora Nacimiento,Objeto,Estado,Notas,Color,Textura,Tama√±o,Simbolismo,Trauma,Preguntas,Sanacion,Tip,Fecha An√°lisis\n";
                athletes.forEach(athlete => {
                    if (athlete.analyses && athlete.analyses.length > 0) {
                        athlete.analyses.forEach(analysis => {
                            csv += `"${athlete.id}","${athlete.nombre}","${athlete.apellidos}","${athlete.telefono}","${athlete.mail}","${athlete.deporte}","${athlete.fecha_nacimiento}","${athlete.hora_nacimiento}","${analysis.objeto}","${analysis.estado}","${analysis.notas ? analysis.notas.replace(/"/g, '""') : ''}","${analysis.color}","${analysis.textura}","${analysis.tama√±o}","${analysis.simbolismo.replace(/"/g, '""')}","${analysis.trauma.replace(/"/g, '""')}","${analysis.preguntas.replace(/"/g, '""')}","${analysis.sanacion.replace(/"/g, '""')}","${analysis.tip.replace(/"/g, '""')}","${analysis.fecha}"\n";
                        });
                    } else {
                        csv += `"${athlete.id}","${athlete.nombre}","${athlete.apellidos}","${athlete.telefono}","${athlete.mail}","${athlete.deporte}","${athlete.fecha_nacimiento}","${athlete.hora_nacimiento}","","","","","","","","","",""\n";
                    }
                });
                const blob = new Blob([csv], { type: "text/csv" });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = "mindsight_datos_completos.csv";
                a.click();
                alert("Datos exportados como CSV. √Åbrelo en Excel para an√°lisis.");
            }
        });
    </script>
</body>
</html>